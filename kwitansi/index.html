<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rumah Nenek Laundry</title>
<style>
body{font-family:sans-serif;padding:20px;background:#f7f7f7;}
h2{text-align:center;color:#333;}
form{background:#fff;padding:20px;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,0.1);}
input,select,textarea,button{width:100%;margin:5px 0;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc;}
button{background:#4CAF50;color:#fff;border:none;cursor:pointer;}
button:hover{background:#45a049;}
#status{margin-top:10px;color:#333;text-align:center;}
</style>
</head>
<body>

<h2>Input Kwitansi Laundry</h2>
<form id="kwitansiForm">
  <input type="text" id="nama" placeholder="Nama Konsumen" required>
  <input type="text" id="alamat" placeholder="Alamat Konsumen" required>
  <input type="text" id="no_wa" placeholder="No WA" required>
  <select id="jenis">
    <option value="Cuci Kiloan">Cuci Kiloan</option>
    <option value="Cuci Satuan">Cuci Satuan</option>
  </select>
  <textarea id="catatan" placeholder="Catatan"></textarea>
  <input type="number" id="total" placeholder="Total Harga" required>
  <select id="metode">
    <option value="Cash">Cash</option>
    <option value="Transfer">Transfer</option>
  </select>
  <button type="submit">Kirim Kwitansi</button>
</form>

<div id="status"></div>
<div style="margin-top:10px;text-align:center;">
  <button id="printBtn">Print Kwitansi</button>
  <button id="waBtn">Share WA</button>
</div>

<script>
// Ganti URL ini dengan Web App URL final kamu
const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbxYI1iBRJTbHdPFUhcIg4BtGaCxAZnfzErX3hS0gThC4lH12lL1v8jsywK2axb_noybBA/exec';

document.getElementById('kwitansiForm').addEventListener('submit', function(e){
  e.preventDefault();
  const data = {
    Nama_Konsumen:String(document.getElementById('nama').value||''),
    Alamat:String(document.getElementById('alamat').value||''),
    No_WA:String(document.getElementById('no_wa').value||'0'),
    Jenis_Layanan:String(document.getElementById('jenis').value||'Cuci Kiloan'),
    Catatan:String(document.getElementById('catatan').value||''),
    Total_Harga:Number(document.getElementById('total').value||0),
    Metode_Pembayaran:String(document.getElementById('metode').value||'Cash')
  };

  fetch(WEB_APP_URL,{
    method:'POST',
    body:JSON.stringify(data),
    headers:{'Content-Type':'application/json'}
  })
  .then(res=>res.json())
  .then(res=>{
    if(res.ok){
      document.getElementById('status').innerText='Berhasil! No Kwitansi: '+res.result.no_kwitansi;
      document.getElementById('kwitansiForm').reset();
    } else {
      document.getElementById('status').innerText='Gagal: '+res.error;
    }
  })
  .catch(err=>{
    document.getElementById('status').innerText='Error: '+err;
  });
});

// Tombol Print
document.getElementById('printBtn').addEventListener('click', function(){
  window.print();
});

// Tombol Share WA
document.getElementById('waBtn').addEventListener('click', function(){
  const noWa = document.getElementById('no_wa').value || '0';
  const nama = document.getElementById('nama').value || '';
  const total = document.getElementById('total').value || '0';
  const msg = `Kwitansi Laundry:\nNama: ${nama}\nTotal: Rp ${total}`;
  const waUrl = `https://wa.me/${noWa}?text=${encodeURIComponent(msg)}`;
  window.open(waUrl,'_blank');
});
</script>

</body>
</html>